#!/usr/bin/env bash

# Simple AUR installer intended as a fallback.

set -e

temp=$(mktemp -d -t aur-install.XXXXXXXXXX)
trap "rm -rf '$temp'" INT TERM EXIT

url=https://aur.archlinux.org/cgit/aur.git/snapshot

for name in "$@"; do
	cd "$temp"
	pkg=$name.tar.gz
	cache=$temp/$pkg
	curl -L -o "$cache" "$url/$pkg" &&
		tar -xvf "$cache" && cd "$temp/$name" &&
		makepkg -sri --noconfirm --needed
done
