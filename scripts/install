#!/usr/bin/env bash

set -eu

name=${1:-}

pacman_list=$PWD/packages/pacman${name:+-$name}
aur_list=$PWD/packages/aur${name:+-$name}

if [[ -f $pacman_list ]]; then
    sudo cat "$pacman_list" | sudo pacman -S --noconfirm --needed -
fi

if [[ -f $aur_list ]]; then
    if ! which pikaur &>/dev/null; then
        ./stow/.local/bin/enable-pikaur
    fi
    pikaur -S --noconfirm --needed - <"$aur_list"
fi
